# æ•…éšœæ’é™¤æŒ‡å—

## ğŸ”§ å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ

### 1. å›¾åƒç”ŸæˆæˆåŠŸä½†ä¿å­˜å¤±è´¥

**ç—‡çŠ¶ï¼š**
- å›¾åƒå·²ç”Ÿæˆå¹¶æ˜¾ç¤ºåœ¨æµè§ˆå™¨ä¸­
- ç”ŸæˆæŒ‰é’®æŒç»­è½¬åœˆ
- æ§åˆ¶å°æ˜¾ç¤º "Failed to fetch" é”™è¯¯
- æ•°æ®åº“æ’å…¥å¤±è´¥

**åŸå› ï¼š**
- å­˜å‚¨æ¡¶æœªåˆ›å»ºæˆ–é…ç½®é”™è¯¯
- å›¾åƒURLå¤ªé•¿ï¼ˆBase64æ•°æ®ï¼‰
- å­˜å‚¨æƒé™é—®é¢˜

**è§£å†³æ–¹æ¡ˆï¼š**

#### æ­¥éª¤1ï¼šåˆ›å»ºå­˜å‚¨æ¡¶
1. æ‰“å¼€ [Supabase Dashboard](https://app.supabase.com/)
2. å‰å¾€æ‚¨çš„é¡¹ç›®
3. ç‚¹å‡» "Storage" é¡µé¢
4. ç‚¹å‡» "Create bucket"
5. æ¡¶åç§°ï¼š`generated-images`
6. è®¾ç½®ä¸ºå…¬å…± (Public)
7. ç‚¹å‡» "Create bucket"

#### æ­¥éª¤2ï¼šæ‰§è¡Œå­˜å‚¨ç­–ç•¥
1. æ‰“å¼€ "SQL Editor"
2. å¤åˆ¶ `lib/database/storage-setup.sql` çš„å†…å®¹
3. æ‰§è¡Œ SQL åˆ›å»ºå­˜å‚¨ç­–ç•¥

#### æ­¥éª¤3ï¼šæ£€æŸ¥å­˜å‚¨æ¡¶æƒé™
ç¡®ä¿ä»¥ä¸‹ç­–ç•¥å·²åˆ›å»ºï¼š
- `Users can view own images`
- `Users can upload own images`
- `Users can delete own images`
- `Users can update own images`

### 2. å›¾åƒæ— æ³•æ˜¾ç¤º

**ç—‡çŠ¶ï¼š**
- å†å²é¡µé¢ä¸­å›¾åƒæ˜¾ç¤ºä¸ºç©ºç™½
- æ§åˆ¶å°æ˜¾ç¤ºå›¾åƒåŠ è½½é”™è¯¯

**è§£å†³æ–¹æ¡ˆï¼š**

#### æ£€æŸ¥å­˜å‚¨æ¡¶å…¬å…±è®¿é—®
1. åœ¨ Supabase Dashboard çš„ Storage é¡µé¢
2. ç¡®ä¿ `generated-images` æ¡¶æ˜¯å…¬å…±çš„
3. å¦‚æœä¸æ˜¯ï¼Œç‚¹å‡»æ¡¶åç§° â†’ Settings â†’ Make public

#### æ£€æŸ¥Next.jsé…ç½®
ç¡®ä¿ `next.config.js` ä¸­åŒ…å«SupabaseåŸŸåï¼š
```javascript
domains: ['localhost', 'wweiaejnhpdimbwncvxv.supabase.co']
```

### 3. ç”¨æˆ·è®¤è¯é—®é¢˜

**ç—‡çŠ¶ï¼š**
- æ— æ³•ç™»å½•
- æ˜¾ç¤º "User not authenticated" é”™è¯¯

**è§£å†³æ–¹æ¡ˆï¼š**

#### æ£€æŸ¥Google OAuthé…ç½®
1. åœ¨ Google Cloud Console ä¸­ç¡®è®¤é‡å®šå‘URIï¼š
   - `https://wweiaejnhpdimbwncvxv.supabase.co/auth/v1/callback`
2. åœ¨ Supabase Dashboard çš„ Authentication â†’ Settings
3. ç¡®ä¿Google providerå·²å¯ç”¨å¹¶é…ç½®æ­£ç¡®

### 4. æ•°æ®åº“è¿æ¥é—®é¢˜

**ç—‡çŠ¶ï¼š**
- æ•°æ®åº“æŸ¥è¯¢å¤±è´¥
- æ§åˆ¶å°æ˜¾ç¤ºSupabaseè¿æ¥é”™è¯¯

**è§£å†³æ–¹æ¡ˆï¼š**

#### æ£€æŸ¥ç¯å¢ƒå˜é‡
ç¡®ä¿ `.env.local` æ–‡ä»¶ä¸­åŒ…å«ï¼š
```
NEXT_PUBLIC_SUPABASE_URL=https://wweiaejnhpdimbwncvxv.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key
```

#### æ£€æŸ¥æ•°æ®åº“è¡¨
1. åœ¨ Supabase Dashboard çš„ Table Editor
2. ç¡®ä¿ä»¥ä¸‹è¡¨å·²åˆ›å»ºï¼š
   - `user_profiles`
   - `image_generations`
   - `user_preferences`

### 5. å¼€å‘æœåŠ¡å™¨é—®é¢˜

**ç—‡çŠ¶ï¼š**
- å¼€å‘æœåŠ¡å™¨æ— æ³•å¯åŠ¨
- ç«¯å£å†²çª

**è§£å†³æ–¹æ¡ˆï¼š**

#### æ›´æ”¹ç«¯å£
```bash
npm run dev -- --port 3001
```

#### æ¸…ç†ç¼“å­˜
```bash
rm -rf .next
npm run dev
```

## ğŸ” è°ƒè¯•æŠ€å·§

### 1. æ£€æŸ¥æ§åˆ¶å°æ—¥å¿—
æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ŒæŸ¥çœ‹ï¼š
- Console é€‰é¡¹å¡ï¼šJavaScripté”™è¯¯
- Network é€‰é¡¹å¡ï¼šAPIè¯·æ±‚çŠ¶æ€

### 2. æ£€æŸ¥Supabaseæ—¥å¿—
1. åœ¨ Supabase Dashboard
2. å‰å¾€ "Logs" é¡µé¢
3. æŸ¥çœ‹APIè¯·æ±‚å’Œé”™è¯¯æ—¥å¿—

### 3. æµ‹è¯•å­˜å‚¨æ¡¶
åœ¨Supabase Dashboardçš„Storageé¡µé¢ï¼š
1. æ‰‹åŠ¨ä¸Šä¼ ä¸€å¼ æµ‹è¯•å›¾ç‰‡
2. æ£€æŸ¥æ˜¯å¦èƒ½å¤Ÿè®¿é—®å…¬å…±URL
3. éªŒè¯æƒé™ç­–ç•¥æ˜¯å¦æ­£ç¡®

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœé—®é¢˜ä»æœªè§£å†³ï¼š

1. **æ£€æŸ¥ç‰ˆæœ¬å…¼å®¹æ€§**
   - Next.js 14+
   - Supabase JavaScriptå®¢æˆ·ç«¯æœ€æ–°ç‰ˆæœ¬

2. **é‡æ–°éƒ¨ç½²**
   - æ¸…ç†ç¼“å­˜ï¼š`rm -rf .next node_modules`
   - é‡æ–°å®‰è£…ï¼š`npm install`
   - é‡å¯å¼€å‘æœåŠ¡å™¨ï¼š`npm run dev`

3. **æŸ¥çœ‹è¯¦ç»†é”™è¯¯**
   - å¯ç”¨è¯¦ç»†æ—¥å¿—è®°å½•
   - æ£€æŸ¥å®Œæ•´çš„é”™è¯¯å †æ ˆè·Ÿè¸ª

## ğŸ¯ é¢„é˜²æªæ–½

1. **å®šæœŸå¤‡ä»½**
   - å¯¼å‡ºæ•°æ®åº“Schema
   - å¤‡ä»½å­˜å‚¨æ¡¶å†…å®¹

2. **ç›‘æ§é…é¢**
   - æ£€æŸ¥Supabaseé¡¹ç›®é…é¢
   - ç›‘æ§å­˜å‚¨ä½¿ç”¨æƒ…å†µ

3. **æ›´æ–°ä¾èµ–**
   - å®šæœŸæ›´æ–°Supabaseå®¢æˆ·ç«¯
   - ä¿æŒNext.jsç‰ˆæœ¬æœ€æ–° 